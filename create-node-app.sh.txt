#!/bin/bash

cd ~/Documents/GitHub
express --git --view=ejs my-node-app
cd my-node-app && npm install

npm install eslint prettier eslint-config-prettier @trivago/prettier-plugin-sort-imports --save-dev
npm init @eslint/config

wget https://gist.githubusercontent.com/lcsjunior/35d7286cc2192e088c3d4441f71ad9a1/raw/.prettierrc
echo -e "$(jq '.env.node = true' .eslintrc.json)" >| .eslintrc.json
echo -e "$(jq '.extends = ["eslint:recommended", "prettier"]' .eslintrc.json)" >| .eslintrc.json

npm set-script lint "eslint . --ext .jsx,.js"
npm set-script lintFix "eslint . --ext .jsx,.js --fix"
npm set-script format "prettier --write \"**/*.{js,jsx,json,md}\""
npm set-script start "nodemon --inspect ./bin/www"

npm install husky --save-dev
npm set-script prepare "husky install"
yarn prepare
npx husky add .husky/pre-commit "npm run lint"
git add .husky/pre-commit

# https://www.npmjs.com/package/dotenv ... Preload
npm install dotenv dotenv-expand --save

npm install sequelize pg pg-hstore --save
npm install sequelize-cli --save-dev
npx sequelize-cli init

# https://sequelize.org/docs/v6/other-topics/migrations/#the-sequelizerc-file
# https://sequelize.org/docs/v6/other-topics/migrations/
# https://sequelize.org/docs/v6/getting-started/

# https://mongoosejs.com/docs/index.html
npm install mongoose --save
